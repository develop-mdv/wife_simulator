# TG Wife AI

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–Ω–µ –±–æ—Ç–∞). –û—Ç–≤–µ—á–∞–µ—Ç –≤ —Å—Ç–∏–ª–µ –ª—é–±—è—â–µ–π, –∑–∞–±–æ—Ç–ª–∏–≤–æ–π –∂–µ–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Gemini 2.5 Flash** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üí¨ –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ Gemini API –≤ —Å—Ç–∏–ª–µ –∂–∏–≤–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏
- üéØ –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É —á–µ–ª–æ–≤–µ–∫—É (–º—É–∂—É)
- üåô –¢–∏—Ö–∏–µ —á–∞—Å—ã —Å —Ä–µ–∂–∏–º–æ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –æ—á–µ—Ä–µ–¥–∏
- ‚å®Ô∏è –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ ("–ø–µ—á–∞—Ç–∞–µ—Ç...")
- üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –≤ SQLite
- üõ°Ô∏è Rate limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ Ubuntu VPS

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com | sudo sh

# –î–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –≥—Ä—É–ø–ø—É docker (–ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –ø–æ—Å–ª–µ)
sudo usermod -aG docker $USER
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone <your-repo-url> tg-wife-ai
cd tg-wife-ai
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `TG_API_ID` –∏ `TG_API_HASH` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ [my.telegram.org/apps](https://my.telegram.org/apps)
- `GEMINI_API_KEY` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ [aistudio.google.com/apikey](https://aistudio.google.com/apikey)
- `TARGET_USER_ID` –∏–ª–∏ `TARGET_USERNAME` ‚Äî –∫–æ–º—É –æ—Ç–≤–µ—á–∞—Ç—å

### 4. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
docker compose run --rm tg-wife-ai
```

–¢–µ–ª–µ–≥—Ä–∞–º –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–¥ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç. –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.
–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ 2FA ‚Äî –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`.

### 5. –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ

```bash
# –ó–∞–ø—É—Å–∫
docker compose up -d --build

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `TG_API_ID` | Telegram API ID | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `TG_API_HASH` | Telegram API Hash | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `GEMINI_API_KEY` | Gemini API –∫–ª—é—á | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `TARGET_USER_ID` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–º—É–∂–∞ | ‚Äî |
| `TARGET_USERNAME` | Username –±–µ–∑ @ | ‚Äî |
| `MODEL_NAME` | –ú–æ–¥–µ–ª—å Gemini | `gemini-2.5-flash` |
| `STYLE_PROFILE` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —á–µ—Ä—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ | ‚Äî |
| `CONTEXT_TURNS` | –ö–æ–ª-–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ | `40` |
| `TIMEZONE` | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å | `Europe/Moscow` |
| `QUIET_HOURS_START` | –ù–∞—á–∞–ª–æ —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ | ‚Äî |
| `QUIET_HOURS_END` | –ö–æ–Ω–µ—Ü —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ | ‚Äî |
| `QUIET_MODE` | `ignore` –∏–ª–∏ `queue` | `queue` |
| `RATE_LIMIT_COUNT` | –ú–∞–∫—Å. –æ—Ç–≤–µ—Ç–æ–≤ | `4` |
| `RATE_LIMIT_WINDOW_SEC` | –ó–∞ –ø–µ—Ä–∏–æ–¥ (—Å–µ–∫) | `30` |

## FAQ

### –ì–¥–µ –ª–µ–∂–∏—Ç telegram.session?

–í –ø–∞–ø–∫–µ `./data/telegram.session`. –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é ‚Äî **–Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º**.

### –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –º—É–∂–∞?

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```bash
TARGET_USER_ID=–Ω–æ–≤—ã–π_id
# –∏–ª–∏
TARGET_USERNAME=–Ω–æ–≤—ã–π_username
```
–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
docker compose restart
```

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å user_id?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) ‚Äî –ø–µ—Ä–µ—à–ª–∏—Ç–µ –µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –Ω—É–∂–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.

### –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∏—Ö–∏–µ —á–∞—Å—ã?

–í `.env`:
```bash
QUIET_HOURS_START=23:00
QUIET_HOURS_END=08:00
QUIET_MODE=queue  # –∏–ª–∏ ignore
```

- `queue` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–ø—è—Ç—Å—è, —É—Ç—Ä–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω –æ–±—â–∏–π –æ—Ç–≤–µ—Ç
- `ignore` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å?

–í `.env` –¥–æ–±–∞–≤—å—Ç–µ `STYLE_PROFILE`:
```bash
STYLE_PROFILE=–õ—é–±–ª—é –≥–æ—Ç–æ–≤–∏—Ç—å. –ß–∞—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞—é —á—Ç–æ –Ω–∞ —É–∂–∏–Ω. –û–±–æ–∂–∞—é –∫–æ—Ç–∏–∫–æ–≤.
```

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç ‚Äî —á—Ç–æ –¥–µ–ª–∞—Ç—å?

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
docker compose logs --tail=100
```

–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –ù–µ–≤–µ—Ä–Ω—ã–µ `TG_API_ID`/`TG_API_HASH`
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π `GEMINI_API_KEY`
- Telethon session –ø—Ä–æ—Ç—É—Ö ‚Äî —É–¥–∞–ª–∏—Ç–µ `./data/telegram.session` –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ
